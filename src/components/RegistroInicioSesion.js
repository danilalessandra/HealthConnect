import React, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import styles from '../styles/RegistroInicioSesion.module.css'; // Import CSS Module
import RegistroEstadoAnimo from './RegistroEstadoAnimo'; // Ensure this import is correct

function RegistroInicioSesionCompleto() {
  const navigate = useNavigate();
  const [showPasswordLogin, setShowPasswordLogin] = useState(false);
  const [showPasswordRegister, setShowPasswordRegister] = useState(false);
  const [activeTab, setActiveTab] = useState('login'); // 'login' or 'register'
  const [emailLogin, setEmailLogin] = useState('');
  const [passwordLogin, setPasswordLogin] = useState('');
  const [emailRegister, setEmailRegister] = useState('');
  const [passwordRegister, setPasswordRegister] = useState('');
  const [confirmPasswordRegister, setConfirmPasswordRegister] = useState('');
  const [nameRegister, setNameRegister] = useState(''); // New state for name in registration

  const handleTogglePasswordLogin = () => {
    setShowPasswordLogin(!showPasswordLogin);
  };

  const handleTogglePasswordRegister = () => {
    setShowPasswordRegister(!showPasswordRegister);
  };

  const handleTabClick = (tab) => {
    setActiveTab(tab);
  };

  const handleLogin = (e) => {
    e.preventDefault();
    console.log('Logging in with:', { email: emailLogin, password: passwordLogin });
    // Simulate successful login
    setTimeout(() => {
      navigate('/registro-estado-animo');
    }, 1000); // Simulate API call delay
  };

  const handleRegister = (e) => {
    e.preventDefault();
    if (passwordRegister !== confirmPasswordRegister) {
      alert('Las contraseñas no coinciden.');
      return;
    }
    console.log('Registering with:', {
      name: nameRegister,
      email: emailRegister,
      password: passwordRegister,
      confirmPassword: confirmPasswordRegister,
    });
    // Add your registration logic here
    alert('Registro exitoso (simulado)!');
    setActiveTab('login'); // Optionally switch to login tab after successful registration
  };

  const handleGoogleLogin = () => {
    console.log('Logging in with Google');
    // Add your Google login logic here
  };

  const handleFacebookLogin = () => {
    console.log('Logging in with Facebook');
    // Add your Facebook login logic here
  };

  return (
    <div className={styles.container}>
      <h1 className={styles.title}>Bienvenido a HealthConnect</h1>
      <p className={styles.subtitle}>Acceda a sus registros médicos y citas</p>

      <div className={styles.tabNavigation}>
        <button
          className={`${styles.tab} ${activeTab === 'login' ? styles.activeTab : ''}`}
          onClick={() => handleTabClick('login')}
        >
          Acceso
        </button>
        <button
          className={`${styles.tab} ${activeTab === 'register' ? styles.activeTab : ''}`}
          onClick={() => handleTabClick('register')}
        >
          Registro
        </button>
      </div>

      {activeTab === 'login' && (
        <form onSubmit={handleLogin} className={styles.loginForm}>
          <div className={styles.formGroup}>
            <label htmlFor="emailLogin" className={styles.label}>
              Correo electrónico
            </label>
            <input
              type="email"
              id="emailLogin"
              className={styles.input}
              placeholder="Introduzca su dirección de correo electrónico"
              value={emailLogin}
              onChange={(e) => setEmailLogin(e.target.value)}
            />
          </div>
          <div className={styles.formGroup}>
            <label htmlFor="passwordLogin" className={styles.label}>
              Contraseña
            </label>
            <div className={styles.passwordInputWrapper}>
              <input
                type={showPasswordLogin ? 'text' : 'password'}
                id="passwordLogin"
                className={styles.input}
                placeholder="Ingrese su contraseña"
                value={passwordLogin}
                onChange={(e) => setPasswordLogin(e.target.value)}
              />
              <button
                type="button"
                className={styles.togglePasswordButton}
                onClick={handleTogglePasswordLogin}
              >
                {showPasswordLogin ? 'Ocultar' : 'Mostrar'}
              </button>
            </div>
          </div>
          <a href="#" className={styles.forgotPasswordLink}>
            ¿Has olvidado tu contraseña?
          </a>
          <button type="submit" className={styles.loginButton}>
            Acceso
          </button>
        </form>
      )}

      {activeTab === 'register' && (
        <form onSubmit={handleRegister} className={styles.registrationForm}>
          <div className={styles.formGroup}>
            <label htmlFor="nameRegister" className={styles.label}>
              Nombre
            </label>
            <input
              type="text"
              id="nameRegister"
              className={styles.input}
              placeholder="Ingrese su nombre"
              value={nameRegister}
              onChange={(e) => setNameRegister(e.target.value)}
            />
          </div>
          <div className={styles.formGroup}>
            <label htmlFor="emailRegister" className={styles.label}>
              Correo electrónico
            </label>
            <input
              type="email"
              id="emailRegister"
              className={styles.input}
              placeholder="Introduzca su dirección de correo electrónico"
              value={emailRegister}
              onChange={(e) => setEmailRegister(e.target.value)}
            />
          </div>
          <div className={styles.formGroup}>
            <label htmlFor="passwordRegister" className={styles.label}>
              Contraseña
            </label>
            <div className={styles.passwordInputWrapper}>
              <input
                type={showPasswordRegister ? 'text' : 'password'}
                id="passwordRegister"
                className={styles.input}
                placeholder="Ingrese su contraseña"
                value={passwordRegister}
                onChange={(e) => setPasswordRegister(e.target.value)}
              />
              <button
                type="button"
                className={styles.togglePasswordButton}
                onClick={handleTogglePasswordRegister}
              >
                {showPasswordRegister ? 'Ocultar' : 'Mostrar'}
              </button>
            </div>
          </div>
          <div className={styles.formGroup}>
            <label htmlFor="confirmPasswordRegister" className={styles.label}>
              Confirmar contraseña
            </label>
            <div className={styles.passwordInputWrapper}>
              <input
                type="password"
                id="confirmPasswordRegister"
                className={styles.input}
                placeholder="Confirme su contraseña"
                value={confirmPasswordRegister}
                onChange={(e) => setConfirmPasswordRegister(e.target.value)}
              />
              {/* You might not need a toggle for confirm password */}
            </div>
          </div>
          <button type="submit" className={styles.registerButton}>
            Registro
          </button>
        </form>
      )}

      <div className={styles.socialLogin}>
        <p className={styles.socialLoginText}>O continuar con</p>
        <div className={styles.socialButtons}>
          <button className={styles.googleButton} onClick={handleGoogleLogin}>
            Google
          </button>
          <button className={styles.facebookButton} onClick={handleFacebookLogin}>
            Facebook
          </button>
        </div>
      </div>
    </div>
  );
}

export default RegistroInicioSesionCompleto;




































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































